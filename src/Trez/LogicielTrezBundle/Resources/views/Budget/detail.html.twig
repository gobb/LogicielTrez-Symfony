{%  extends 'TrezLogicielTrezBundle::layout.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/trezlogicieltrez/css/budget-detail.css') }}" />
{% endblock %}

{% block body %}
    <h1>Détail du budget {{ budget.nom }}</h1>

    <table class="table table-hover table-condensed table-bordered budget-flat a-color-inherit">
        <thead>
            <tr>
                <th>Clé</th>
                <th>Nom</th>
                <th>Débit</th>
                <th>Crédit</th>
                <th>Commentaire</th>
            </tr>
        </thead>
        <tbody>
            {% for categorie in budget.categories %}
                <tr class="categorie">
                    <td>{{ categorie.cle }}</td>
                    <td><a href="{{ url('sous_categorie_index', {'categorie_id': categorie.id}) }}">{{ categorie.nom }}</a></td>
                    <td>{{ categorie.debit|excel_format }}</td>
                    <td>{{ categorie.credit|excel_format }}</td>
                    <td>{{ categorie.commentaire }}</td>
                </tr>
                {% for sousCategorie in categorie.sousCategories %}
                    <tr class="sous-categorie">
                        <td>{{ categorie.cle ~ '.' ~sousCategorie.cle }}</td>
                        <td><a href="{{ url('ligne_index', {'sous_categorie_id': sousCategorie.id}) }}">{{ sousCategorie.nom }}</a></td>
                        <td>{{ sousCategorie.debit|excel_format }}</td>
                        <td>{{ sousCategorie.credit|excel_format }}</td>
                        <td>{{ sousCategorie.commentaire }}</td>
                    </tr>
                    {% for ligne in sousCategorie.lignes %}
                        <tr class="ligne">
                            <td>{{ categorie.cle ~ '.' ~ sousCategorie.cle ~ '.' ~ ligne.cle }}</td>
                            <td><a href="{{ url('facture_index', {'ligne_id': ligne.id}) }}">{{ ligne.nom }}</a></td>
                            <td>{{ ligne.debit|excel_format }}</td>
                            <td>{{ ligne.credit|excel_format }}</td>
                            <td>{{ ligne.commentaire }}</td>
                        </tr>
                    {% endfor %}
                {% endfor %}
            {% endfor %}
            <tr class="budget">
                <td></td>
                <td></td>
                <td>{{ budget.debit|excel_format }}</td>
                <td>{{ budget.credit|excel_format }}</td>
                <td>Solde : {{ (budget.credit - budget.debit)|excel_format }}</td>
            </tr>
        </tbody>
    </table>
{% endblock %}
